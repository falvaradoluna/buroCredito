appControllers.controller("contratoController",function(e,o,t,r,a,s,n,i,d,l,c,u,p,f){e.init=function(){m(),b(),g(),o.verDatos=!1,o.verLimiteCredito=!1,$(".datepicker").datepicker({})},e.BuscarCliente=function(o){$("#searchCliente").modal("show"),a.obtieneDatosCliente(e.txtBusqueda).then(function t(o){e.listaClientes=o.data},function r(e){c.error("No se pudieron obtener los datos "+e.data.message)})};var m=function(){r.obtieneTipoContrato(0).then(function o(t){e.listaTiposContrato=t.data},function t(e){c.error("No se pudieron obtener los tipos de contrato: "+e.data.message)})},b=function(){s.obtieneTipoEmpresa(0).then(function o(t){e.listaTiposEmpresa=t.data},function t(e){c.error("No se pudieron obtener los tipos de empresa: "+e.data.message)})};e.CargarSucursales=function(o){$("#cboSucursal").attr("disabled","disabled"),n.obtieneTipoSucursal(o).then(function t(o){$("#cboSucursal").removeAttr("disabled"),e.listaTiposSucursal=o.data},function r(e){$("#cboSucursal").removeAttr("disabled"),c.error("No se pudieron obtener los tipos de sucursal: "+e.data.message)})},e.CargarDepartamentos=function(o){$("#cboDepartamento").attr("disabled","disabled"),i.obtieneTipoDepartamento(o).then(function t(o){$("#cboDepartamento").removeAttr("disabled"),e.listaTiposDepartamento=o.data},function r(e){$("#cboDepartamento").removeAttr("disabled"),c.error("No se pudieron obtener los tipos de departamento: "+e.data.message)})},e.cargarCliente=function(e){o.datosCliente=e,o.verDatos=!0,$("#searchCliente").modal("hide")},e.cargarLimiteCredito=function(t,r,a,s){o.verLimiteCredito=!0,d.obtieneLimiteCredito(t,r,a,s).then(function n(o){e.datosCredito=o.data},function i(e){c.error("No se pudieron obtener los datos "+e.data.message)})};var g=function(){l.obtieneListaDocumentos(0).then(function o(t){e.listaDocumentos=t.data,setTimeout(function(){var e=1,o=$("#custom-droptable"),t=$("#customDZ").dropzone({url:"data/upload-file.php",addedfile:function(t){1==e&&o.find("tbody").html("");var r=parseInt(t.size/1024,10);r=1024>r?r+" KB":parseInt(r/1024,10)+" MB";var a=$('<tr>                                                    <td class="text-center">'+e++ +"</td>                                                    <td>"+t.name+'</td>                                                    <td><div class="progress"><div class="progress-bar progress-bar-warning"></div></div></td>                                                    <td>'+r+"</td>                                                </tr>");o.find("tbody").append(a),t.fileEntryTd=a,t.progressBar=a.find(".progress-bar")},uploadprogress:function(e,o,t){e.progressBar.width(o+"%"),$(".custom-dropzone .drop-table").perfectScrollbar({suppressScrollX:!0})},success:function(e){e.progressBar.removeClass("progress-bar-warning").addClass("progress-bar-success")},error:function(e){e.progressBar.removeClass("progress-bar-warning").addClass("progress-bar-red")}})},1e3)},function t(e){c.error("No se pudieron obtener la lista de Documentos: "+e.data.message)})};e.submit=function(o){null!=o&&e.upload(o)},e.upload=function(o){p.upload({url:"http://localhost:4700/api/documentos/uploadfile/",data:{file:o}}).then(function(e){0===e.data.error_code?f.alert("Success "+e.config.data.file.name+"uploaded. Response: "):f.alert("an error occured")},function(e){console.log("Error status: "+e.status),f.alert("Error status: "+e.status)},function(o){console.log(o);var t=parseInt(100*o.loaded/o.total);console.log("progress: "+t+"% "+o.config.data.file.name),e.progress="progress: "+t+"% "})}});